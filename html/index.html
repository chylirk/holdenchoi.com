<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- BEGIN Info -->
    <meta
      name="description"
      content="Holden Choi— full-stack software developer"
    />
    <meta name="title" property="og:title" content="Holden Choi" />
    <meta property="og:type" content="Website" />
    <meta name="image" property="og:image" content="images/thumb.png" />
    <meta
      name="description"
      property="og:description"
      content="Holden Choi— full-stack software developer"
    />
    <meta name="author" content="Holden Choi" />
    <!-- END Info -->

    <!-- BEGIN favicon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="images/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="images/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="images/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="images/favicon/site.webmanifest" />
    <link
      rel="mask-icon"
      href="images/favicon/safari-pinned-tab.svg"
      color="#5bbad5"
    />
    <link rel="shortcut icon" href="images/favicon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta
      name="msapplication-config"
      content="images/favicon/browserconfig.xml"
    />
    <meta name="theme-color" content="#ffffff" />
    <!-- END favicon -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Holden Choi</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@tailwindcss/typography@0.2.x/dist/typography.min.css"
    />
    <link rel="stylesheet" href="stylesheets/reset.css" />
    <link rel="stylesheet" href="stylesheets/style.css" />
    <link rel="stylesheet" href="stylesheets/responsive.css" />
  </head>
  <body>
    <header class="mobile-menu-closed">
      <div id="header">
        <a href="/">
          <img src="images/logo/logo-name.svg" />
        </a>
        <nav>
          <a href="#start-here" class="selected">Start Here</a>
          <a href="#case-study">Retrospect</a>
          <a href="#presentation">Presentation</a>
          <!-- <a href="#our-team">Our Team</a> -->
          <!-- <a
            href="http://ekko-demo.s3.us-east-2.amazonaws.com/chat-demo/index.html"
            target="_blank"
            >Demo</a
          > -->
          <!-- <a
            href="https://ekko.readme.io/docs/installation"
            target="_blank"
            >Docs</a
          > -->
          <a
            href="https://github.com/chylirk"
            target="_blank"
            class="icon"
            ><i class="fab fa-github"></i
          ></a>
        </nav>
        <div id="menu">
          <button type="button">
            <svg
              id="mobile-open"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16"
              />
            </svg>
            <svg
              id="mobile-close"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
      </div>

      <div id="header-buffer"></div>

      <div id="mobile-menu">
        <a href="#start-here" class="selected">Start Here</a>
        <a href="#case-study">Retrospect</a>
        <a href="#presentation">Presentation</a>
        <!-- <a href="#our-team">Our Team</a> -->
        <!-- <a
            href="http://ekko-demo.s3.us-east-2.amazonaws.com/chat-demo/index.html"
            target="_blank"
            >Demo</a
          > -->
          <!-- <a
            href="https://ekko.readme.io/docs/installation"
            target="_blank"
            >Docs</a
          > -->
        <a
          href="https://github.com/chylirk"
          target="_blank"
          class="icon"
          ><i class="fab fa-github"></i
        ></a>
      </div>
    </header>

    <div id="start-here" class="main-section">
      <div class="h-full">
        <div class="static-logo-color"></div>
        <div class="bg-blue">
          <img
            class="retrospect-mobile sm-screen"
            src="images/logo/logo-mobile.png"
          />
          <img class="retrospect lg-screen" src="images/logo/retrospect-name-white.png" />

          <p class="light-text">
            An open-source, full-stack tracing framework <br />for small,
            <span class="text-pink">distributed applications.</span><br /> 
            <br>
            Retrospect helps you <br />
             <span class="text-teal">collect, connect and select</span><br />
            backend traces.
          </p>
        </div>
      </div>
      <div class="h-full">
        <div class="bg-teal static-logo-teal-light">
          <h2>Easy to Manage & Deploy</h2>
        </div>
        <div class="bg-teal">
          <h2 class="sm-header">Easy to Manage & Deploy</h2>
          <p>
            Retrospect abstracts away the complexity of working with cloud
            infrastructure by automating the deployment process.
          </p>
          <img
          class="lazy"
          data-src="images/ui/retrospect-ui-chapter.png"
        />
        </div>
      </div>
      <div class="h-full">
        <div class="bg-pink static-logo-pink-light">
          <h2>Modular and Flexible</h2>
        </div>
        <div class="bg-pink">
          <h2 class="sm-header">Modular and Flexible</h2>
          <p>
            Retrospect Functions are serverless functions that can be customized for
            your realtime needs and reused across applications.
          </p>

          <video autoplay loop muted playsinline class="pad">
            <source
              src="images/diagrams/infrastructure-3.mp4"
              type="video/mp4"
            />
          </video>
        </div>
      </div>
    </div>

    <aside id="toc">
      <ul>
        <!-- Section 1 -->
        <li data-section="section-1" class="selected">
          <a href="#section-1">
            <div>
              <div class="bullet"><div></div></div>
              <p>Retrospect 101</p>
            </div>
          </a>
        </li>
        <!-- Section 2 -->
        <li data-section="section-2">
          <a href="#section-2">
            <div>
              <div class="bullet"><div></div></div>
              <p>Use Case</p>
            </div>
          </a>
        </li>
        <li data-section="section-2" class="subitem">
          <a href="#section-2-1">
            <div>
              <div class="bullet"><div></div></div>
              <p>Bob's Shop: An Example User Story</p>
            </div>
          </a>
        </li>
        <li data-section="section-2" class="subitem">
          <a href="#section-2-2">
            <div>
              <div class="bullet"><div></div></div>
              <p>There's a Problem</p>
            </div>
          </a>
        </li>
        <li data-section="section-2" class="subitem">
          <a href="#section-2-3">
            <div>
              <div class="bullet"><div></div></div>
              <p>About Distributed Systems</p>
            </div>
          </a>
        </li>
        <li data-section="section-2" class="subitem">
          <a href="#section-2-4">
            <div>
              <div class="bullet"><div></div></div>
              <p>Observability</p>
            </div>
          </a>
        </li>
        <li data-section="section-2" class="subitem">
          <a href="#section-2-5">
            <div>
              <div class="bullet"><div></div></div>
              <p>2.5 Why Tracing?</p>
            </div>
          </a>
        </li>
        <li data-section="section-2" class="subitem">
          <a href="#section-2-6">
            <div>
              <div class="bullet"><div></div></div>
              <p>2.6 Reproducing Bugs?</p>
            </div>
          </a>
        </li>
        <!-- Section 3 -->
        <li data-section="section-3">
          <a href="#section-3">
            <div>
              <div class="bullet"><div></div></div>
              <p>Existing Solutions</p>
            </div>
          </a>
        </li>
        <li data-section="section-3" class="subitem">
          <a href="#section-3-1">
            <div>
              <div class="bullet"><div></div></div>
              <p>Enterprise</p>
            </div>
          </a>
        </li>
        <li data-section="section-3" class="subitem">
          <a href="#section-3-2">
            <div>
              <div class="bullet"><div></div></div>
              <p>DIY</p>
            </div>
          </a>
        </li>
        <!-- Section 4 -->
        <li data-section="section-4">
          <a href="#section-4">
            <div>
              <div class="bullet"><div></div></div>
              <p>How Retrospect is Different</p>
            </div>
          </a>
        </li>
        <li data-section="section-4" class="subitem">
          <a href="#section-4-1">
            <div>
              <div class="bullet"><div></div></div>
              <p>Retrospect's Architecture</p>
            </div>
          </a>
        </li>
        <li data-section="section-4" class="subitem">
          <a href="#section-4-2">
            <div>
              <div class="bullet"><div></div></div>
              <p>Bob's Architecture with Retrospect</p>
            </div>
          </a>
        </li>
        <!-- Section 5 -->
        <li data-section="section-5">
          <a href="#section-5">
            <div>
              <div class="bullet"><div></div></div>
              <p>Design Decisions</p>
            </div>
          </a>
        </li>
        <li data-section="section-5" class="subitem">
          <a href="#section-5-1">
            <div>
              <div class="bullet"><div></div></div>
              <p>Decisions</p>
            </div>
          </a>
        </li>
        <li data-section="section-5" class="subitem">
          <a href="#section-5-2">
            <div>
              <div class="bullet"><div></div></div>
              <p>Sessions & Chapters</p>
            </div>
          </a>
        </li>
        <!-- Section 6 -->
        <li data-section="section-6">
          <a href="#section-6">
            <div>
              <div class="bullet"><div></div></div>
              <p>Implementation Challenges</p>
            </div>
          </a>
        </li>
        <!-- Section 7 -->
        <li data-section="section-7">
          <a href="#section-7">
            <div>
              <div class="bullet"><div></div></div>
              <p>Installation & Demo</p>
            </div>
          </a>
        </li>
        <li data-section="section-7" class="subitem">
          <a href="#section-7-1">
            <div>
              <div class="bullet"><div></div></div>
              <p>Installation</p>
            </div>
          </a>
        </li>
        <li data-section="section-7" class="subitem">
          <a href="#section-7-2">
            <div>
              <div class="bullet"><div></div></div>
              <p>Demo</p>
            </div>
          </a>
        </li>
        <!-- Section 8 -->
        <li data-section="section-8">
          <a href="#section-8">
            <div>
              <div class="bullet"><div></div></div>
              <p>Retrospect Testing</p>
            </div>
          </a>
        </li>
        <!-- Section 9 -->
        <li data-section="section-9">
          <a href="#section-9">
            <div>
              <div class="bullet"><div></div></div>
              <p>Future Work</p>
            </div>
          </a>
        </li>
      </ul>
    </aside>

    <div id="case-study" class="main-section">
      <div id="case-study-content">
        <div class="prose">
          <h1>Case Study</h1>
          <!-- Section 1 -->
          <h2 id="section-1">1. Retrospect 101</h2>
          <p>
            Some words about distributed systems being difficult to manage.
          </p>

          <p>
            What is retrospect?
          </p>

          <!-- Section 2 -->
          <h2 id="section-2">2. Use Case</h2>
          <h3 id="section-2-1">2.1 Bob's Shop: An Example User Story</h3>
          <p>
            Here's what Robert's small 1-2 person team looks like.
          </p>

          <p>It works so far:</p>
          <img
            class="lazy"
            data-src="images/bobs-shop/bobs-shop.png"
          />

          <h3 id="section-2-2">2.2 There's a Problem</h3>
          <p>
            What happens when a service goes down? Bob has to find out what's going on, and sometimes the only clues he has are provided by the user. Unfortunately, Bob can’t depend on users giving him an accurate and comprehensive description of all the activity in the browser - all the actions they took, which browser they were using, etc.
          </p>
          <p>
            As a result, when a user complains, Bob is often forced to ping every service in his architecture to see if it's still up. If that does not work, then he SSHs into the most likely culprit and checks the logs at the approximate time of the problem. From there, he is rinsing and repeating until the bug is found… or not.
          </p>

          <img
            class="lazy"
            data-src="images/bobs-shop/bob-debugging.gif"
          />

          <p>
            So, now that he has checked all the logs in each service, he might try reproducing the error himself. Which brings him back to the original problem of user-provided information. It’s incomplete. He might try buying the same product that the customer did in hopes of reproducing the problem, but if it was caused by some unexpected behavior by the customer, good luck.
          </p>

          <p>
            And here’s maybe the worst part. It might not even be a problem with his code. Bob could spend hours looking through logs, poring over code, and talking to customers, but if the actual source of the error was that the machine hosting his shipping code randomly went down… good luck. His customers won’t know and his code looks fine. Not easy to spot.
          </p>

          <h3 id="section-2-3">2.3 About Distributed Systems</h3>

          <blockquote>
            "Working with distributed systems is fundamentally different from writing software on a single computer—and the main difference is that there are lots of new and exciting ways for things to go wrong." - <a href="">Martin Kleppmann</a>
          </blockquote>

          <p>
            Why is this problem happening to Bob? Why is it so hard to debug in a distributed system?
          </p>

          <p>
            Distributed systems have a far higher number of interconnected parts, so the number and types of failure that can occur is higher too. Additionally, distributed systems are constantly updated, and every change can create a new type of failure. <a href="https://www.splunk.com/en_us/data-insider/what-is-observability.html">Source</a>
          </p>

          <p>
            When all your code lives inside a single machine, you are relatively insulated from the physical world. You can tell at a glance if something has broken. Once your application lives on external computing, you become dependent on networks and data centers well beyond your reach. Machines can become overloaded, data centers can lose power, and you cannot console.log in the user’s browser. In a distributed system, you are subject to messy reality.
          </p>

          <h3>How Retrospect Helps</h3>

          <p>
            Retrospect is an observability tool for Node applications that allows you to record back-end activity in an easily searchable manner, replacing the process of pinging servers and searching logs.
          </p>

          <p>
            It also records front-end activity, giving the user an exact reproduction of the customer UI.

          </p>

          <p>
            Finally, Retrospect ties the front-end recordings to the back-end recordings in a single UI.
          </p>


          <h3 id="section-2-4">2.4 Observability</h3>

          <img
          class="lazy"
          data-src="images/diagrams/three_pillars_observability.jpeg"
        />

        <p>
          We said that Retrospect is an observability tool, but what is observability?

          Essentially, it’s a set of tools and techniques for understanding what is happening inside of a system by gathering data as it runs.

          You’re probably familiar with two of the three pillars: metrics and logs.

        </p>

        <p>
          Metrics are numeric values over time - for example requests per second, average response time, status code frequency - these can indicate if your system has a problem by illustrating irregular patterns

          Logs are records of events that happened at a particular time including contextual information - these can tell you what the problem was, once you’ve found the right logs.
        </p>

        <p> 
          From Splunk:

          <ul>
          <li>
            Metrics: A metric is a numeric value measured over an interval of time and includes specific attributes such as timestamp, name, KPIs and value.
          </li> 
          <li>
          Traces: A trace represents the end-to-end journey of a request through a distributed system. As a request moves through the host system, every operation performed on it — called a “span” — is encoded with important data relating to the microservice performing that operation. By viewing traces, each of which includes one or more spans, you can track its course through a distributed system and identify the cause of a bottleneck or breakdown.
          </li>
          <li>
          Logs: A log is a text record of an event that happened at a particular time and includes a timestamp that tells when it occurred and a payload that provides context.
          </li>
          </ul>
        </p>

        <p>
          Another explanation below:
          <ul>
            <p>
              Metrics - Do I have a problem?
            </p>
              <li>
                Set of numbers that give info about a process or activity, usually measured over time (time-series db)
              </li>

            <p>
              Logs - What is causing the problem?
            </p>
            <li>
              Immutable record of discrete events that happened over time: timestamp with payload of plaintext, structured JSON, or binary (MySQL binlogs, systemd journal logs)
            </li>
            <li>
              Most commonly plaintext - Can be problematic because the quality of the logs depend on the person who configured the logs
            </li>
            <li>
              The more logs you get, the slower things are
            </li>
            <li>
              Modern applications (distributed systems architecture) are often too complex to even know what log to look at (too many interconnected components). You need the correlation with tracing's spans to know where to go in your distributed system.
            </li>
          

            <p>
              Traces - Where is the problem?
              <li>
                A view in time of a single trip through the system (triggered by the frontend actions of a user)
                Involves hops through multiple services in modern-day applications (distributed systems architecture vs monolith)
              </li>
            </p>
          </ul>
        </p>

        <h3 id="section-2-5">2.5 Why Tracing?</h3>

        <p>
          So why did we focus on tracing? Because you need tracing to know where to look, especially in a distributed system. Logs are fantastic when you already know where the problem is, but finding the problem is more than half the battle. Modern applications with distributed architectures are often too complex to even know what log to look at.
        </p>

        <img
        class="lazy"
        data-src="images/diagrams/telephone-game.png"
        />

        <p>
          A helpful analogy here might be the game Telephone. The problem with both back-end debugging and Telephone is that you don't know what happened between the initial request/phrase and the response/final phrase. The distributed system is a black box.
        </p>

        <p>
        And to take the analogy further, your users are essentially playing telephone with your various microservices, and when a bug occurs, it means their word or phrase got distorted somewhere along the way. In the real world, you could ask the user what they said initially, and what was said at the end. Unfortunately, with web applications, the user can’t tell you *exactly* what they said, or *exactly* what they received, and your microservices are very forgetful.
        </p>

        <p>
        Our solution essentially gives the user a piece of paper with instructions to write down their name and phrase. When the game starts, that paper gets passed to the next person/microservice, and so-on-and-so-forth. As a result, if the transmission fails, you can get that piece of paper, look at the names and phrases, and identify where the transmission went wrong.
        </p>

        <p>
        And if you recall Bob’s problem from the beginning of the presentation, the process of talking to the customer, pinging each service, and then SSHing into likely machines was just about finding where the bug lived. That was all a prerequisite to looking through the correct logs. And if the bug was caused by unexpected browser behavior or a machine outage, logs may not even exist.
        </p>

        <h3>Consider the Service Diagram:</h3>

        <img
        class="lazy"
        data-src="images/bobs-shop/bobs-architecture.png"
        />

        <p>
          To put this in more concrete terms, consider the request flow of a system that you might encounter in the real world, an e-commerce app.
        </p>
        <p>
        When a user places an order, multiple actions begin to take place –– information is passed between services in order to authenticate the user, verify inventory, validate payment information, and dispatch an order for shipping.
        </p>
        <p>
        It would be difficult to understand the relationship between services purely from looking at the codebase.
        </p>
        <p>
        A service trace makes it clear how services relate to one another in terms of time and necessity - how long a service takes and which services need to be called to complete the transaction
        </p>

        <img
        class="lazy"
        data-src="images/bobs-shop/bobs-waterfall.png"
        />

        <p>
          In this case, the redis and shipping services were called by “orders” service
        </p>
        <li>
          Order’s service can’t finish until it's childrens finish execution.
        </li>

        <p>
          A service trace is like a service diagram over time for a specific request
        </p>

        <h3>Tracing Terminology</h3>

        <h4>Span</h4>
        <blockquote>"I want to know where a request went, what data it held, and how long it took"</blockquote>
        <p>A span is a single operation within a trace</p>
        <img
        class="lazy"
        data-src="images/diagrams/span.png"/>

        <p>A span is a single operation within a trace, - i.e. a record of where a request went, and how long it took.</p>

        <h4>Root Span</h4>
        <blockquote>"I want to know the first request to hit my architecture"</blockquote>
        <p>A Root Span is a span that encompasses an entire set of child spans.</p>
        <img
        class="lazy"
        data-src="images/diagrams/root-span.png"/>
        <p>In other words, a Root Span measures the time it took from a user clicking a button to the request flow being completed or failing</p>

        <h4>Trace</h4>
        <blockquote>"I want to see a complete execution path of a single request"</blockquote>
        <p>A Trace is a view into a single request as it moves through a distributed system.</p>
        <img
        class="lazy"
        data-src="images/diagrams/trace.png"/>
        <p>It is the list of all spans descended from a particular Root Span.</p>

        <p>Other possible blockquotes</p>
        <blockquote>“I want to see a complete execution path of a single request” and identify which part of the code is causing issues like errors, latency concerns or resource availability.</blockquote>

        <blockquote>"I want to see the entire progression of a single request"</blockquote>


        <h3 id="section-2-6">2.5 Reproducing Bugs?</h3>

        <p>
          Backend tracing without frontend session recording can tell you where a bug occurred but not what a user did to cause the error to occur.
        </p>

        <p>
        In addition, if the trace does not tell you where the bug occurred but you have a record of the frontend events tied to a trace, you can better reproduce the bug.
        </p>


          <!-- Section 3 -->
          <h2 id="section-3">3. How is Realtime Implemented</h2>
          <p>
            There are many ways to implement realtime in an application. In this
            section, we will explore a common way to achieve realtime
            functionality for an app with many publishers and many subscribers.
          </p>

          <h3 id="section-3-1">3.1 Enterprise</h3>
          <p>
            At the bedrock of web communication we have traditional HTTP request
            response cycles, and along with it the idea of pulling data.
          </p>

          <p>
            When you pull data, you have data that lives in a database
            somewhere. This data isn’t retrieved until a client explicitly makes
            a request for the data, at which point the server responds.
          </p>
          <p>
            As we mentioned before, realtime applications automatically update
            users, without the user requesting the update. So, realtime apps
            tend not to use a data pull pattern.
          </p>

          <h3 id="section-3-2">3.2 DIY</h3>

          
    
          <!-- Section 4 -->
          <h2 id="section-4">4. How Retrospect is Different</h2>
          <p>
            At first glance, implementing realtime functionality for an
            application is fairly simple. A library (like
            <a href="https://socket.io" target="_blank">SocketIO</a>) can be
            installed to manage Websocket connections and realtime messages.
            This works well for a small application, with a small number of
            publishers and subscribers. But eventually, coupling application
            code with realtime management code (all on the same server) becomes
            problematic.
          </p>
          <p>
            As a realtime application becomes popular, the app server will need
            to manage an increasing volume of realtime messages. Eventually, the
            message load will become too great and (potentially) cause the app
            server to crash.
          </p>

          <img class="lazy" data-src="images/diagrams/realtime-service.png" />
          <p>
            When realtime applications become more popular, the realtime
            management component may need to scale at a different rate than the
            rest of the application. A separate realtime service can scale
            independently from the applications themselves, eliminating the need
            to scale up an entire monolithic application.
          </p>

          <p>
            To summarise, having dedicated infrastructure for realtime offers:
          </p>
          <ul>
            <li>
              <strong>Flexibility</strong> (by decoupling the realtime needs
              from that of the application, you can scale each part up and down
              as needed)
            </li>
            <li>
              <strong>Less Complexity</strong> (separating out the services
              means that you have a better sense of what each part is doing;
              developers can focus on their applications instead of
              infrastructure)
            </li>
            <li>
              <strong>Specialization Benefits</strong> (each part is able to do
              what it does best, without interference from anything else, and
              you can optimise for each particular service)
            </li>
          </ul>
          <h3 id="section-4-1">4.1 Retrospect's Architecture</h3>
          <img class="lazy" data-src="images/diagrams/brands.png" />
          <p>
            Companies like
            <a href="https://www.pubnub.com" target="_blank">PubNub</a>,
            <a href="https://ably.com" target="_blank">Ably</a> and
            <a href="https://pusher.com" target="_blank">Pusher</a>, three of
            the major providers of realtime infrastructure-as-a-service, cater
            to this need for a managed realtime infrastructure. They
            <a href="https://www.pubnub.com/company/" target="_blank"
              >advocate</a
            >
            decoupling realtime infrastructure from your application code “so
            that product development teams can focus on innovation instead of
            infrastructure.”
          </p>
          <blockquote>
            “so that product development teams can focus on innovation instead
            of infrastructure.” - PubNub
          </blockquote>

          <h3 id="section-4-2">4.1 Bob's Architecture with Retrospect</h3>

          <!-- Section 5 -->
          <h2 id="section-5">5. Design Decisions</h2>
          <p>
            There’s one last important component of realtime that has not been
            mentioned. Realtime messages often require in-transit message
            processing. When a message is published, it might need to undergo
            some type of analysis or transformation before being received by
            subscribed clients.
          </p>
          <h3 id="section-5-1">5.1 Decisions</h3>
          <p>
            The general pattern of performing some kind of computation on
            realtime messages is widespread.
          </p>
          <p>Here are some examples of common realtime middleware uses:</p>
          <ul>
            <li>Filtering profanity out of chat messages</li>
            <li>
              Enriching latitude/longitude coordinates with the demographic
              information of that area
            </li>
            <li>Translating a message in a chat app to a different language</li>
            <li>Performing sentiment analysis on text with machine learning</li>
            <li>Routing payment information to third parties such as Stripe</li>
            <li>Responding to messages with chat bots</li>
            <li>Sending alerts, given a particular trigger / condition</li>
          </ul>
          <img
            class="lazy"
            data-src="images/diagrams/realtime-categories.png"
          />
          <p>
            Some real-world examples of this middleware being used for specific
            services include:
          </p>
          <ul>
            <li>
              <a
                href="https://www.youtube.com/watch?v=BCpReEEV9i8"
                target="_blank"
                >A large beverage company</a
              >
              that made a chat app for a big sporting event. They wanted to
              filter any mention of their competitor out of the chat. So they
              sent every message down to their servers which they had to spin up
              and scale, strip out the name of their competitor, replace it with
              their name, and republish the message back out.
            </li>
            <li>
              <a href="https://ably.com/case-studies/guild" target="_blank"
                >Guild</a
              >, a professional messaging/chat app, uses realtime middleware to
              handle event-based triggers for their users
            </li>
            <li>
              <a href="https://ably.com/case-studies/onedio" target="_blank"
                >Onedio</a
              >, an HQ-trivia app for 1 million players, uses realtime
              middleware to route messages to AWS’ SQS with extremely low
              latency, something they likely wouldn’t have been able to support
              without it.
            </li>
          </ul>
          <p>
            This need for realtime middleware was recognized by both of the
            major realtime infrastructure-as-a-service providers, PubNub and
            Ably. Both companies observed that their customers often needed to
            perform a small bit of processing on their realtime messages.
          </p>
          <blockquote>
            “A common requirement in realtime messaging applications is to be
            able to insert some business logic into a message processing
            pipeline.” -<a
              href="https://ably.com/blog/why-we-dont-offer-functions"
              target="_blank"
              >Ably</a
            >
          </blockquote>
          <h3 id="section-5-2">5.2 Sessions & Chapters</h3>
          <p>
            PubNub and Ably recognized the need for realtime middleware when
            they noticed
            <a
              href="https://www.youtube.com/watch?v=BCpReEEV9i8&ab_channel=PubNub"
              target="_blank"
              >an interesting anti-pattern</a
            >
            emerge with how their customers were using their services.
          </p>
          <p>
            Recall that PubNub and Ably’s services allow customers to decouple
            their application infrastructure from their realtime infrastructure
            as described above. However, they observed the users of their
            services were sending every single message down to their own app
            servers to perform some kind of processing or compute on those
            messages. This reintroduced a lot of the same problems that existed
            when things were tightly coupled. Now their customers found they had
            to pay closer attention to the scaling needs of their service as it
            became overburdened with this increased load.
          </p>
          <blockquote>
            "You see everyone publishing down to their servers doing a small
            little bit of processing and then publishing the message right back
            out... It doesn't make sense to be funneling all of your data back
            down to a small number of servers, scale those out as needed,
            process and then republish back out... so, this [PubNub Functions]
            is absolutely required." (PubNub CEO, Todd Greene)
          </blockquote>
          
          <ol>
            <li>In the client-side code</li>
            <li>In the server-side code</li>
            <li>On a dedicated server for realtime middleware</li>
            <li>In Serverless Functions</li>
          </ol>
     
          
          <!-- Section 6 -->
          <h2 id="section-6">6. Implementation Challenges</h2>
          <p>
            Developers building realtime applications can choose between three
            main options: a third-party service, an open-source solution, or
            do-it-yourself. The right choice depends on the specific use case.
          </p>
          <img class="lazy" data-src="images/diagrams/current-options.png" />
          <p>
            If easy setup is most important, it’s probably best to go with a
            third-party solution. There are good open-source solutions, but the
            extent to which they are easy-to-use depends on each use case.
          </p>
          <p>
            If complete control over data and infrastructure is important,
            third-party solutions won't work. In this case, the only options are
            open-source solutions or custom, self-built solutions.
          </p>

          <!-- Section 7 -->
          <h2 id="section-7">7. Installation & Demo</h2>
          <p>There are four main parts to Retrospect:</p>
          <ul>
            <li>Retrospect Server</li>
            <li>Retrospect Functions</li>
            <li>Retrospect CLI</li>
            <li>Retrospect Client</li>
          </ul>
          <img class="lazy" data-src="images/diagrams/parts.png" />
          <p>
            The Retrospect Server manages realtime messages for applications with many
            publishers and subscribers. It facilitates the processing of
            realtime messages by invoking Retrospect Functions.
          </p>
          <p>
            Retrospect Functions provide realtime middleware for in-transit message
            processing. These functions are easy to create, update, and deploy
            with the Retrospect CLI tool. For complex workflows, developers can chain
            multiple Retrospect Functions together.
          </p>
          
          <h3 id="section-7-1">7.1 Installation</h3>
          <p>
            The Retrospect Server infrastructure can easily be deployed to AWS by
            running the <code>ekko init</code> command using the
            <a
              href="https://www.npmjs.com/package/ekko-realtime-cli"
              target="_blank"
              >Retrospect CLI tool</a
            >.
          </p>
          <img
            class="lazy"
            data-src="images/diagrams/cli-deploy-no-shadow.png"
          />
          <p>
            The Retrospect CLI prompts for AWS credentials and uses those, along with
            AWS’ Cloud Development Kit (CDK), to deploy the Retrospect infrastructure
            to AWS.
          </p>
          <h3 id="section-7-2">7.2 Demo</h3>
          <img class="lazy" data-src="images/diagrams/infrastructure-1.png" />
          <p>This is the infrastructure deployed by <code>ekko init</code>.</p>
          <p>
            The Retrospect Server is a Node application deployed via container to AWS’
            Elastic Container Service (ECS). The Application Load Balancer
            distributes incoming WebSocket connections to the Retrospect Server. We’ll
            go into more detail on the importance of the S3 bucket and
            ElastiCache instance in section 8.
          </p>

          <!-- Section 8 -->
          <h2 id="section-8">8. Retrospect Testing</h2>
          <p>
            We faced several engineering challenges when building Retrospect: how to
            authenticate clients connecting to our server, how to associate
            individual Retrospect Functions with specific realtime channels, and how
            to scale the infrastructure.
          </p>

          <!-- Section 9 -->
          <h2 id="section-9">9. Future Work</h2>
          <p>
            We wanted Retrospect to be able to manage thousands of WebSocket
            connections to be viable as a realtime message processing framework.
            In addition, we wanted it to handle and route hundreds of thousands
            of messages in a short amount of time, all while invoking Lambda
            functions for in-transit message processing. To test all of this, we
            used the
            <a href="https://artillery.io/" target="_blank"
              >Artillery.io load testing library</a
            >
          </p>
        </div>
      </div>
    </div>

    <div id="presentation" class="main-section">
      <div class="bg-gray">
        <h2>Presentation</h2>
        <iframe
          src="https://www.youtube-nocookie.com/embed/L-rbSRf2BrU?rel=0&controls=0&showinfo=0"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <div id="our-team" class="main-section">
      <div>
        <div>
          <div>
            <h2>Meet our team</h2>
            <p class="text-xl text-gray-300">
              We are currently looking for opportunities. If you liked what you
              saw and want to talk more, please reach out!
            </p>
          </div>
          <ul class="people">
            <li class="profile">
              <img
                class="mx-auto h-40 w-40 rounded-full xl:w-56 xl:h-56 lazy"
                data-src="images/team/hc.jpg"
                alt=""
              />
              <div>
                <div>
                  <h3>Holden Choi</h3>
                  <p>Austin, TX</p>
                </div>

                <ul class="social">
                  <li>
                    <a href="mailto:choi.holden@gmail.com" target="_blank"
                      ><i class="fas fa-envelope"></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="https://www.linkedin.com/in/holden-c-55b50277/"
                      target="_blank"
                      ><i class="fab fa-linkedin"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://github.com/chylirk" target="_blank"
                      ><i class="fab fa-github"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://www.holdenchoi.com/" target="_blank"
                      ><i class="fas fa-globe"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </li>

            <li class="profile">
              <img
                class="mx-auto h-40 w-40 rounded-full xl:w-56 xl:h-56 lazy"
                data-src="images/team/sb.jpg"
                alt=""
              />
              <div>
                <div>
                  <h3>Svetlana Brennan</h3>
                  <p>Dallas, TX</p>
                </div>

                <ul class="social">
                  <li>
                    <a href="mailto:svetlana.svn@gmail.com" target="_blank"
                      ><i class="fas fa-envelope"></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="https://www.linkedin.com/in/svetlana-brennan-1b76b583/"
                      target="_blank"
                      ><i class="fab fa-linkedin"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://github.com/svetlanabrennan" target="_blank"
                      ><i class="fab fa-github"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://svetlanabrennan.com" target="_blank"
                      ><i class="fas fa-globe"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </li>

            <li class="profile">
              <img
                class="mx-auto h-40 w-40 rounded-full xl:w-56 xl:h-56 lazy"
                data-src="images/team/ev.jpeg"
                alt=""
              />
              <div>
                <div>
                  <h3>Earl Veloso</h3>
                  <p>Austin, TX</p>
                </div>

                <ul class="social">
                  <li>
                    <a href="mailto:eufrosinoveloso@gmail.com" target="_blank"
                      ><i class="fas fa-envelope"></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="https://www.linkedin.com/in/eufrosino/"
                      target="_blank"
                      ><i class="fab fa-linkedin"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://github.com/Eufrosino" target="_blank"
                      ><i class="fab fa-github"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://eufrosino.com" target="_blank"
                      ><i class="fas fa-globe"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </li>

            <li class="profile">
              <img
                class="mx-auto h-40 w-40 rounded-full xl:w-56 xl:h-56 lazy"
                data-src="images/team/nb.jpg"
                alt=""
              />
              <div>
                <div>
                  <h3>Nicole Bailey</h3>
                  <p>Ann Arbor, MI</p>
                </div>

                <ul class="social">
                  <li>
                    <a href="mailto:nicole@faenre.dev" target="_blank"
                      ><i class="fas fa-envelope"></i
                    ></a>
                  </li>
                  <li>
                    <a
                      href="https://www.linkedin.com/in/leonanicolebailey/"
                      target="_blank"
                      ><i class="fab fa-linkedin"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://github.com/Faenre" target="_blank"
                      ><i class="fab fa-github"></i
                    ></a>
                  </li>
                  <li>
                    <a href="https://faenre.dev" target="_blank"
                      ><i class="fas fa-globe"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <script src="javascripts/script.js"></script>
  </body>
</html>
